#!/usr/bin/env bash

set -eux

# ninja


ARR=(
    "adload"
    "bitcoinminer"
    "ccleaner"
    "coinminer"
    "dridex"
    "emotet"
    "feiwo"
    "koler"
    "magic"
    "mazarbot"
    "mobidash"
    "penetho"
    "plankton"
    "ransombo"
    "sality"
    "snojan"
    "svpeng"
    "thbot"
    "trickbot"
    "trickster"
    "trojanminer"
    "wannalocker"
    "webcompanion"
    "zsone"
)

for item in ${ARR[@]}; do
    docker run --rm \
    -v "$(pwd)/data:/HyperVision/data" \
    -v "$(pwd)/temp:/HyperVision/temp" \
    -v "$(pwd)/cache:/HyperVision/cache" \
    hypervision:latest \
    -c "./HyperVision -config ../configuration/malware/${item}.json > ../cache/${item}.log"
done

cd ./result_analyze
./batch_analyzer.py -g malware
cat ./log/malware/*.log | grep AU_ROC
cd -